<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TaskMaster Pro</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      /* Dark theme variables (default) */
      --primary-color: #6200ee;
      --primary-light: #bb86fc;
      --primary-dark: #3700b3;
      --secondary-color: #03dac6;
      --error-color: #cf6679;
      --background: #121212;
      --surface: #1e1e1e;
      --on-background: #e1e1e1;
      --on-surface: #ffffff;
      --grey-100: #f5f5f5;
      --grey-200: #eeeeee;
      --grey-300: #e0e0e0;
      --grey-400: #bdbdbd;
      --grey-500: #9e9e9e;
      --grey-700: #616161;
      --priority-low: #4caf50;
      --priority-medium: #fb8c00;
      --priority-high: #e53935;
      --completed: #81c784;
      --in-progress: #64b5f6;
      --pending: #ffb74d;
    }

    /* Light theme variables */
    [data-theme="light"] {
      --primary-color: #6200ee;
      --primary-light: #7c4dff;
      --primary-dark: #3700b3;
      --secondary-color: #03dac6;
      --error-color: #b00020;
      --background: #f5f5f5;
      --surface: #ffffff;
      --on-background: #333333;
      --on-surface: #000000;
      --grey-100: #f5f5f5;
      --grey-200: #eeeeee;
      --grey-300: #e0e0e0;
      --grey-400: #bdbdbd;
      --grey-500: #9e9e9e;
      --grey-700: #616161;
      --priority-low: #4caf50;
      --priority-medium: #fb8c00;
      --priority-high: #e53935;
      --completed: #81c784;
      --in-progress: #64b5f6;
      --pending: #ffb74d;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background-color: var(--background);
      color: var(--on-background);
      line-height: 1.6;
      height: 100vh;
      overflow: hidden;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .app-container {
      display: grid;
      grid-template-rows: auto 1fr;
      height: 100vh;
    }

    /* Header Styles */
    .app-header {
      background-color: var(--surface);
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      z-index: 10;
      transition: background-color 0.3s ease;
    }

    .app-title {
      display: flex;
      align-items: center;
    }

    .app-title h1 {
      color: var(--primary-light);
      margin-left: 10px;
      font-size: 24px;
      font-weight: 600;
    }

    .app-logo {
      font-size: 24px;
      color: var(--primary-light);
    }

    .search-container {
      position: relative;
      flex: 1;
      max-width: 400px;
      margin: 0 20px;
    }

    .search-input {
      width: 100%;
      padding: 10px 15px 10px 35px;
      border: none;
      border-radius: 24px;
      background-color: rgba(255, 255, 255, 0.1);
      color: var(--on-background);
      font-size: 14px;
      transition: background-color 0.3s ease;
    }

    .search-input:focus {
      outline: none;
      background-color: rgba(255, 255, 255, 0.15);
    }

    .search-icon {
      position: absolute;
      top: 50%;
      left: 10px;
      transform: translateY(-50%);
      color: var(--grey-500);
    }

    /* Main Content Area */
    .main-content {
      display: grid;
      grid-template-columns: 240px 1fr;
      overflow: hidden;
      height: 100%;
    }

    /* Sidebar Styles */
    .sidebar {
      background-color: var(--surface);
      padding: 20px;
      overflow-y: auto;
      border-right: 1px solid rgba(255, 255, 255, 0.05);
      transition: background-color 0.3s ease;
    }

    .sidebar-section {
      margin-bottom: 25px;
    }

    .sidebar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      color: var(--grey-400);
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .sidebar-item {
      display: flex;
      align-items: center;
      padding: 10px 12px;
      margin-bottom: 5px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      color: var(--on-background);
    }

    .sidebar-item:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }

    .sidebar-item.active {
      background-color: rgba(187, 134, 252, 0.15);
      color: var(--primary-light);
      font-weight: 500;
    }

    .sidebar-item i, .sidebar-item svg {
      margin-right: 10px;
      font-size: 16px;
      width: 20px;
      text-align: center;
    }

    .sidebar-item .item-count {
      margin-left: auto;
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 2px 8px;
      font-size: 12px;
    }

    .priority-indicator {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .priority-low {
      background-color: var(--priority-low);
    }

    .priority-medium {
      background-color: var(--priority-medium);
    }

    .priority-high {
      background-color: var(--priority-high);
    }

    /* Board/List View Area */
    .board-view {
      padding: 20px;
      overflow-y: auto;
      background-color: var(--background);
      transition: background-color 0.3s ease;
    }

    .board-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .board-title {
      font-size: 20px;
      font-weight: 600;
      color: var(--on-background);
    }

    .view-actions {
      display: flex;
      align-items: center;
    }

    .board-action-btn {
      background: var(--surface);
      color: var(--on-surface);
      border: none;
      border-radius: 8px;
      padding: 8px 12px;
      cursor: pointer;
      margin-left: 10px;
      display: flex;
      align-items: center;
      font-size: 14px;
      transition: background-color 0.3s ease;
    }

    .board-action-btn i, .board-action-btn svg {
      margin-right: 5px;
    }

    /* Kanban Board Styles */
    .kanban-board {
      display: flex;
      overflow-x: auto;
      padding-bottom: 15px;
      height: calc(100% - 60px);
    }

    .kanban-column {
      min-width: 280px;
      max-width: 280px;
      margin-right: 15px;
      background-color: var(--surface);
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      height: fit-content;
      max-height: 100%;
      transition: background-color 0.3s ease;
    }

    .column-header {
      padding: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .column-title {
      font-weight: 500;
      display: flex;
      align-items: center;
    }

    .column-title-text {
      margin-left: 8px;
    }

    .column-count {
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 3px 8px;
      font-size: 12px;
      margin-left: 8px;
    }

    .column-tasks {
      padding: 10px;
      overflow-y: auto;
      flex-grow: 1;
      max-height: calc(100vh - 200px);
    }

    .add-task-btn {
      margin: 10px;
      padding: 10px;
      background-color: rgba(255, 255, 255, 0.05);
      border: 1px dashed var(--grey-700);
      border-radius: 6px;
      color: var(--grey-400);
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .add-task-btn:hover {
      background-color: rgba(255, 255, 255, 0.1);
      color: var(--on-background);
    }

    /* Task Card Styles */
    .task-card {
      background-color: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 10px;
      cursor: pointer;
      position: relative;
      border-left: 3px solid var(--priority-medium);
      transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.3s ease;
    }

    .task-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .task-card.priority-low {
      border-left-color: var(--priority-low);
    }

    .task-card.priority-medium {
      border-left-color: var(--priority-medium);
    }

    .task-card.priority-high {
      border-left-color: var(--priority-high);
    }

    .task-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
    }

    .task-title {
      font-weight: 500;
      font-size: 15px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 200px;
    }

    .task-menu {
      color: var(--grey-500);
      cursor: pointer;
      display: flex;
      align-items: center;
    }

    .task-description {
      color: var(--grey-400);
      font-size: 13px;
      margin-bottom: 12px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .task-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      color: var(--grey-500);
    }

    .task-due-date {
      display: flex;
      align-items: center;
    }

    .task-due-date i, .task-due-date svg {
      margin-right: 5px;
    }

    .task-labels {
      display: flex;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }

    .task-label {
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 11px;
      margin-right: 5px;
      margin-bottom: 5px;
      background-color: rgba(255, 255, 255, 0.1);
    }

    /* Modal styles */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background-color: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }

    .modal-content {
      background-color: var(--surface);
      border-radius: 12px;
      padding: 24px;
      width: 100%;
      max-width: 480px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      transition: background-color 0.3s ease;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .modal-title {
      font-size: 20px;
      font-weight: 600;
      color: var(--on-surface);
    }

    .close-btn {
      background: none;
      border: none;
      color: var(--grey-500);
      cursor: pointer;
      font-size: 20px;
    }

    .form-group {
      margin-bottom: 16px;
    }

    .form-label {
      display: block;
      margin-bottom: 4px;
      font-size: 14px;
      color: var(--grey-300);
    }

    .form-input, .form-textarea, .form-select {
      width: 100%;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 6px;
      color: var(--on-background);
      font-size: 14px;
      transition: background-color 0.3s ease;
    }

    .form-textarea {
      min-height: 80px;
      resize: vertical;
    }

    .form-input:focus, .form-textarea:focus, .form-select:focus {
      outline: none;
      border-color: var(--primary-light);
    }

    .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-top: 24px;
    }

    .btn {
      padding: 8px 16px;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 14px;
    }

    .btn-cancel {
      background-color: transparent;
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: var(--on-background);
    }

    .btn-cancel:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }

    .btn-primary {
      background-color: var(--primary-light);
      border: none;
      color: black;
    }

    .btn-primary:hover {
      background-color: var(--primary-dark);
      color: white;
    }

    /* Progress bar */
    .progress-container {
      background-color: rgba(255, 255, 255, 0.05);
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
    }

    .progress-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      font-size: 14px;
    }

    .progress-bar {
      height: 6px;
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background-color: var(--primary-light);
      border-radius: 3px;
      transition: width 0.3s ease;
    }

    /* User profile and settings */
    .user-profile {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background-color: var(--primary-light);
      color: black;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
    }

    .settings-modal {
      max-width: 600px;
    }

    .settings-tabs {
      display: flex;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      margin-bottom: 20px;
    }

    .settings-tab {
      padding: 10px 16px;
      cursor: pointer;
      position: relative;
    }

    .settings-tab.active {
      color: var(--primary-light);
    }

    .settings-tab.active::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      right: 0;
      height: 2px;
      background-color: var(--primary-light);
    }

    .settings-content {
      display: none;
    }

    .settings-content.active {
      display: block;
    }

    .settings-section {
      margin-bottom: 20px;
    }

    .settings-section-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--on-surface);
    }

    .settings-option {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .settings-option-label {
      font-size: 14px;
    }

    .settings-option-control {
      display: flex;
      align-items: center;
    }

    /* Toggle switch */
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 40px;
      height: 20px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(255, 255, 255, 0.2);
      transition: .4s;
      border-radius: 20px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 2px;
      bottom: 2px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: var(--primary-light);
    }

    input:checked + .toggle-slider:before {
      transform: translateX(20px);
    }

    /* Profile avatar settings */
    .profile-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 20px;
    }

    .profile-avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background-color: var(--primary-light);
      color: black;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 36px;
      margin-bottom: 16px;
    }

    .profile-info {
      width: 100%;
    }

    .avatar-colors {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .avatar-color {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .avatar-color:hover {
      transform: scale(1.2);
    }

    .active-indicator {
      display: none;
    }

    .today-badge, .week-badge {
      display: inline-block;
      background-color: var(--primary-light);
      color: black;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 10px;
      margin-left: 6px;
      line-height: 1.2;
    }

    /* Delete button highlight */
    .task-delete-btn {
      color: var(--error-color);
      margin-left: 5px;
      transition: all 0.2s ease;
    }

    .task-delete-btn:hover {
      transform: scale(1.2);
    }

    /* Responsive styles */
    @media (max-width: 768px) {
      .main-content {
        grid-template-columns: 1fr;
      }
      
      .sidebar {
        display: none;
      }
      
      .kanban-board {
        flex-direction: column;
      }
      
      .kanban-column {
        min-width: 100%;
        max-width: 100%;
        margin-right: 0;
        margin-bottom: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <div class="app-header">
      <div class="app-title">
        <span class="app-logo">📋</span>
        <h1>TaskMaster Pro</h1>
      </div>
      
      <div class="search-container">
        <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
        <input type="text" class="search-input" placeholder="Search tasks..." id="search-input">
      </div>
      
      <div class="user-profile">
        <button class="board-action-btn" id="add-task-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
          <span>Add Task</span>
        </button>
        <button class="board-action-btn" id="settings-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
        </button>
        <div class="user-avatar" id="profile-btn">JD</div>
      </div>
    </div>
    
    <div class="main-content">
      <div class="sidebar">
        <div class="sidebar-section">
          <div class="sidebar-header">
            <span>Boards</span>
            <button class="add-board-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
            </button>
          </div>
          <ul class="boards-list">
            <li class="sidebar-item active">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
              <span>Main Board</span>
              <span class="item-count" id="main-board-count">0</span>
            </li>
            <li class="sidebar-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
              <span>Personal Tasks</span>
              <span class="item-count">0</span>
            </li>
          </ul>
        </div>
        
        <div class="sidebar-section">
          <div class="sidebar-header">
            <span>Categories</span>
            <button class="add-list-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
            </button>
          </div>
          <ul class="lists-list" id="categories-list">
            <!-- Categories will be dynamically populated -->
          </ul>
        </div>
        
        <div class="sidebar-section">
          <div class="sidebar-header">
            <span>Filters</span>
          </div>
          <ul class="filters-list">
            <li class="sidebar-item" id="today-filter">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
              <span>Today</span>
              <span class="item-count" id="today-count">0</span>
            </li>
            <li class="sidebar-item" id="week-filter">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
              <span>This Week</span>
              <span class="item-count" id="week-count">0</span>
            </li>
            <li class="sidebar-item" id="completed-filter">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
              <span>Completed</span>
              <span class="item-count" id="completed-count">0</span>
            </li>
            <li class="sidebar-item" id="high-priority-filter">
              <div class="priority-indicator priority-high"></div>
              <span>High Priority</span>
              <span class="item-count" id="high-priority-count">0</span>
            </li>
            <li class="sidebar-item" id="medium-priority-filter">
              <div class="priority-indicator priority-medium"></div>
              <span>Medium Priority</span>
              <span class="item-count" id="medium-priority-count">0</span>
            </li>
            <li class="sidebar-item" id="low-priority-filter">
              <div class="priority-indicator priority-low"></div>
              <span>Low Priority</span>
              <span class="item-count" id="low-priority-count">0</span>
            </li>
          </ul>
        </div>
        
        <div class="progress-container">
          <div class="progress-header">
            <span>Your Progress</span>
            <span id="progress-text">0/0 Tasks</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
          </div>
        </div>
      </div>
      
      <div class="board-view">
        <div class="board-header">
          <h2 class="board-title">Main Board</h2>
          
          <div class="view-actions">
            <button class="board-action-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 3a2 2 0 0 0-2 2"></path><path d="M19 3a2 2 0 0 1 2 2"></path><path d="M21 19a2 2 0 0 1-2 2"></path><path d="M5 21a2 2 0 0 1-2-2"></path><path d="M9 3h1"></path><path d="M9 21h1"></path><path d="M14 3h1"></path><path d="M14 21h1"></path><path d="M3 9v1"></path><path d="M21 9v1"></path><path d="M3 14v1"></path><path d="M21 14v1"></path></svg>
            </button>
          </div>
        </div>
        
        <div class="kanban-board">
          <!-- To Do Column -->
          <div class="kanban-column">
            <div class="column-header">
              <div class="column-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#ec407a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg>
                <span class="column-title-text">To Do</span>
                <span class="column-count" id="todo-count">0</span>
              </div>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="cursor: pointer;"><path d="M5 3a2 2 0 0 0-2 2"></path><path d="M19 3a2 2 0 0 1 2 2"></path><path d="M21 19a2 2 0 0 1-2 2"></path><path d="M5 21a2 2 0 0 1-2-2"></path><path d="M9 3h1"></path><path d="M9 21h1"></path><path d="M14 3h1"></path><path d="M14 21h1"></path><path d="M3 9v1"></path><path d="M21 9v1"></path><path d="M3 14v1"></path><path d="M21 14v1"></path></svg>
            </div>
            
            <div class="column-tasks" id="todo-tasks">
              <!-- Tasks will be populated dynamically -->
              
              <div class="add-task-btn" id="add-todo-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                Add Task
              </div>
            </div>
          </div>
          
          <!-- In Progress Column -->
          <div class="kanban-column">
            <div class="column-header">
              <div class="column-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#64b5f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48 2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48 2.83-2.83"></path></svg>
                <span class="column-title-text">In Progress</span>
                <span class="column-count" id="progress-count">0</span>
              </div>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="cursor: pointer;"><path d="M5 3a2 2 0 0 0-2 2"></path><path d="M19 3a2 2 0 0 1 2 2"></path><path d="M21 19a2 2 0 0 1-2 2"></path><path d="M5 21a2 2 0 0 1-2-2"></path><path d="M9 3h1"></path><path d="M9 21h1"></path><path d="M14 3h1"></path><path d="M14 21h1"></path><path d="M3 9v1"></path><path d="M21 9v1"></path><path d="M3 14v1"></path><path d="M21 14v1"></path></svg>
            </div>
            
            <div class="column-tasks" id="progress-tasks">
              <!-- Tasks will be populated dynamically -->
              
              <div class="add-task-btn" id="add-progress-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                Add Task
              </div>
            </div>
          </div>
          
          <!-- Completed Column -->
          <div class="kanban-column">
            <div class="column-header">
              <div class="column-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#81c784" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                <span class="column-title-text">Completed</span>
                <span class="column-count" id="completed-column-count">0</span>
              </div>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="cursor: pointer;"><path d="M5 3a2 2 0 0 0-2 2"></path><path d="M19 3a2 2 0 0 1 2 2"></path><path d="M21 19a2 2 0 0 1-2 2"></path><path d="M5 21a2 2 0 0 1-2-2"></path><path d="M9 3h1"></path><path d="M9 21h1"></path><path d="M14 3h1"></path><path d="M14 21h1"></path><path d="M3 9v1"></path><path d="M21 9v1"></path><path d="M3 14v1"></path><path d="M21 14v1"></path></svg>
            </div>
            
            <div class="column-tasks" id="completed-tasks">
              <!-- Tasks will be populated dynamically -->
              
              <div class="add-task-btn" id="add-completed-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                Add Task
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Task Form Modal -->
  <div id="task-modal" class="modal-backdrop" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="modal-title">Add New Task</h2>
        <button class="close-btn" id="close-modal">×</button>
      </div>
      
      <form id="task-form">
        <div class="form-group">
          <label for="task-title" class="form-label">Title *</label>
          <input type="text" id="task-title" class="form-input" required>
        </div>
        
        <div class="form-group">
          <label for="task-description" class="form-label">Description</label>
          <textarea id="task-description" class="form-textarea"></textarea>
        </div>
        
        <div class="form-group">
          <label for="task-category" class="form-label">Category *</label>
          <input type="text" id="task-category" class="form-input" required placeholder="Work, Personal, Shopping, etc.">
        </div>
        
        <div class="form-group">
          <label for="task-priority" class="form-label">Priority</label>
          <select id="task-priority" class="form-select">
            <option value="low">Low</option>
            <option value="medium" selected>Medium</option>
            <option value="high">High</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="task-due-date" class="form-label">Due Date & Time</label>
          <input type="datetime-local" id="task-due-date" class="form-input">
        </div>
        
        <input type="hidden" id="task-id">
        <input type="hidden" id="task-status" value="todo">
        
        <div class="form-actions">
          <button type="button" class="btn btn-cancel" id="cancel-task">Cancel</button>
          <button type="submit" class="btn btn-primary" id="save-task">Add Task</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settings-modal" class="modal-backdrop" style="display: none;">
    <div class="modal-content settings-modal">
      <div class="modal-header">
        <h2 class="modal-title">Settings</h2>
        <button class="close-btn" id="close-settings">×</button>
      </div>
      
      <div class="settings-tabs">
        <div class="settings-tab active" data-tab="appearance">Appearance</div>
        <div class="settings-tab" data-tab="notifications">Notifications</div>
        <div class="settings-tab" data-tab="account">Account</div>
      </div>
      
      <div class="settings-content active" id="appearance-content">
        <div class="settings-section">
          <h3 class="settings-section-title">Theme</h3>
          <div class="settings-option">
            <div class="settings-option-label">Dark Mode</div>
            <div class="settings-option-control">
              <label class="toggle-switch">
                <input type="checkbox" id="theme-toggle">
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </div>
      </div>
      
      <div class="settings-content" id="notifications-content">
        <div class="settings-section">
          <h3 class="settings-section-title">Task Notifications</h3>
          <div class="settings-option">
            <div class="settings-option-label">Enable Notifications</div>
            <div class="settings-option-control">
              <label class="toggle-switch">
                <input type="checkbox" id="notification-toggle" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
          <div class="settings-option">
            <div class="settings-option-label">Due Date Reminders</div>
            <div class="settings-option-control">
              <select class="form-select" id="reminder-time">
                <option value="15">15 minutes before</option>
                <option value="30">30 minutes before</option>
                <option value="60" selected>1 hour before</option>
                <option value="1440">1 day before</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      
      <div class="settings-content" id="account-content">
        <div class="settings-section">
          <h3 class="settings-section-title">User Information</h3>
          <div class="form-group">
            <label for="user-name" class="form-label">Display Name</label>
            <input type="text" id="user-name" class="form-input" value="John Doe">
          </div>
          <div class="form-group">
            <label for="user-email" class="form-label">Email</label>
            <input type="email" id="user-email" class="form-input" value="john.doe@example.com">
          </div>
          <div class="form-actions">
            <button type="button" class="btn btn-primary" id="save-user-info">Save Changes</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Profile Modal -->
  <div id="profile-modal" class="modal-backdrop" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">User Profile</h2>
        <button class="close-btn" id="close-profile">×</button>
      </div>
      
      <div class="profile-section">
        <div class="profile-avatar" id="profile-avatar">JD</div>
        <div class="profile-info">
          <div class="form-group">
            <label for="profile-name" class="form-label">Display Name</label>
            <input type="text" id="profile-name" class="form-input" value="John Doe">
          </div>
          <div class="form-group">
            <label for="profile-initials" class="form-label">Avatar Initials</label>
            <input type="text" id="profile-initials" class="form-input" value="JD" maxlength="2">
          </div>
          <div class="form-group">
            <label class="form-label">Avatar Color</label>
            <div class="avatar-colors">
              <div class="avatar-color" style="background-color: #bb86fc;" data-color="#bb86fc"></div>
              <div class="avatar-color" style="background-color: #03dac6;" data-color="#03dac6"></div>
              <div class="avatar-color" style="background-color: #ec407a;" data-color="#ec407a"></div>
              <div class="avatar-color" style="background-color: #64b5f6;" data-color="#64b5f6"></div>
              <div class="avatar-color" style="background-color: #81c784;" data-color="#81c784"></div>
              <div class="avatar-color" style="background-color: #ffb74d;" data-color="#ffb74d"></div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="form-actions">
        <button type="button" class="btn btn-cancel" id="cancel-profile">Cancel</button>
        <button type="button" class="btn btn-primary" id="save-profile">Save Changes</button>
      </div>
    </div>
  </div>

  <script>
    // Task Data Structure
    let tasks = JSON.parse(localStorage.getItem('tasks') || '[]').map(task => {
      // Convert date strings back to Date objects
      if (task.dueDate) task.dueDate = new Date(task.dueDate);
      if (task.createdAt) task.createdAt = new Date(task.createdAt);
      return task;
    });
    
    // User preferences
    let userPreferences = JSON.parse(localStorage.getItem('userPreferences') || JSON.stringify({
      theme: 'dark',
      notifications: true,
      reminderTime: 60,
      name: 'John Doe',
      email: 'john.doe@example.com',
      initials: 'JD',
      avatarColor: '#bb86fc'
    }));
    
    // DOM Elements
    const taskModal = document.getElementById('task-modal');
    const taskForm = document.getElementById('task-form');
    const settingsModal = document.getElementById('settings-modal');
    const profileModal = document.getElementById('profile-modal');
    const modalTitle = document.getElementById('modal-title');
    const saveTaskBtn = document.getElementById('save-task');
    const closeModalBtn = document.getElementById('close-modal');
    const closeSettingsBtn = document.getElementById('close-settings');
    const closeProfileBtn = document.getElementById('close-profile');
    const cancelTaskBtn = document.getElementById('cancel-task');
    const addTaskBtn = document.getElementById('add-task-btn');
    const settingsBtn = document.getElementById('settings-btn');
    const profileBtn = document.getElementById('profile-btn');
    const addTodoBtn = document.getElementById('add-todo-btn');
    const addProgressBtn = document.getElementById('add-progress-btn');
    const addCompletedBtn = document.getElementById('add-completed-btn');
    const todoTasksContainer = document.getElementById('todo-tasks');
    const progressTasksContainer = document.getElementById('progress-tasks');
    const completedTasksContainer = document.getElementById('completed-tasks');
    const themeToggle = document.getElementById('theme-toggle');
    const profileAvatar = document.getElementById('profile-avatar');
    const userAvatar = document.getElementById('profile-btn');
    
    // Initialize app
    document.addEventListener('DOMContentLoaded', function() {
      // Apply user preferences
      applyTheme(userPreferences.theme);
      themeToggle.checked = userPreferences.theme === 'light';
      document.getElementById('notification-toggle').checked = userPreferences.notifications;
      document.getElementById('reminder-time').value = userPreferences.reminderTime;
      document.getElementById('user-name').value = userPreferences.name;
      document.getElementById('user-email').value = userPreferences.email;
      document.getElementById('profile-name').value = userPreferences.name;
      document.getElementById('profile-initials').value = userPreferences.initials;
      updateUserAvatar();
      
      // Set the active avatar color
      const avatarColors = document.querySelectorAll('.avatar-color');
      avatarColors.forEach(color => {
        if (color.dataset.color === userPreferences.avatarColor) {
          color.style.border = '2px solid white';
        }
        
        color.addEventListener('click', function() {
          // Remove active class from all colors
          avatarColors.forEach(c => c.style.border = 'none');
          
          // Add active class to clicked color
          this.style.border = '2px solid white';
          
          // Update user preferences
          userPreferences.avatarColor = this.dataset.color;
          updateUserAvatar();
        });
      });
      
      renderTasks();
      updateCounters();
      refreshSidebar();
    });
    
    // Event Listeners
    addTaskBtn.addEventListener('click', () => openTaskModal());
    addTodoBtn.addEventListener('click', () => openTaskModal('todo'));
    addProgressBtn.addEventListener('click', () => openTaskModal('in-progress'));
    addCompletedBtn.addEventListener('click', () => openTaskModal('completed'));
    closeModalBtn.addEventListener('click', closeTaskModal);
    cancelTaskBtn.addEventListener('click', closeTaskModal);
    
    settingsBtn.addEventListener('click', openSettingsModal);
    closeSettingsBtn.addEventListener('click', closeSettingsModal);
    
    profileBtn.addEventListener('click', openProfileModal);
    closeProfileBtn.addEventListener('click', closeProfileModal);
    
    document.getElementById('save-profile').addEventListener('click', saveProfile);
    document.getElementById('cancel-profile').addEventListener('click', closeProfileModal);
    
    document.getElementById('save-user-info').addEventListener('click', saveUserInfo);
    
    // Settings tab navigation
    const settingsTabs = document.querySelectorAll('.settings-tab');
    settingsTabs.forEach(tab => {
      tab.addEventListener('click', function() {
        // Remove active class from all tabs
        settingsTabs.forEach(t => t.classList.remove('active'));
        
        // Add active class to clicked tab
        this.classList.add('active');
        
        // Hide all content
        document.querySelectorAll('.settings-content').forEach(content => {
          content.classList.remove('active');
        });
        
        // Show selected content
        document.getElementById(`${this.dataset.tab}-content`).classList.add('active');
      });
    });
    
    // Theme toggle
    themeToggle.addEventListener('change', function() {
      const theme = this.checked ? 'light' : 'dark';
      userPreferences.theme = theme;
      localStorage.setItem('userPreferences', JSON.stringify(userPreferences));
      applyTheme(theme);
    });
    
    taskForm.addEventListener('submit', function(e) {
      e.preventDefault();
      saveTask();
    });
    
    document.getElementById('today-filter').addEventListener('click', () => {
      filterTasksByDate('today');
    });
    
    document.getElementById('week-filter').addEventListener('click', () => {
      filterTasksByDate('week');
    });
    
    document.getElementById('completed-filter').addEventListener('click', () => {
      filterTasks('completed');
    });
    
    document.getElementById('high-priority-filter').addEventListener('click', () => {
      filterTasks('priority', 'high');
    });
    
    document.getElementById('medium-priority-filter').addEventListener('click', () => {
      filterTasks('priority', 'medium');
    });
    
    document.getElementById('low-priority-filter').addEventListener('click', () => {
      filterTasks('priority', 'low');
    });
    
    // Search functionality
    document.getElementById('search-input').addEventListener('input', function(e) {
      const searchTerm = e.target.value.toLowerCase().trim();
      if (searchTerm === '') {
        renderTasks(); // Show all tasks when search is empty
        return;
      }
      
      // Filter tasks by search term
      const filteredTasks = tasks.filter(task => 
        task.title.toLowerCase().includes(searchTerm) || 
        (task.description && task.description.toLowerCase().includes(searchTerm)) ||
        task.category.toLowerCase().includes(searchTerm)
      );
      
      renderFilteredTasks(filteredTasks);
    });
    
    // Functions
    function applyTheme(theme) {
      document.documentElement.setAttribute('data-theme', theme);
    }
    
    function updateUserAvatar() {
      profileAvatar.textContent = userPreferences.initials;
      profileAvatar.style.backgroundColor = userPreferences.avatarColor;
      
      userAvatar.textContent = userPreferences.initials;
      userAvatar.style.backgroundColor = userPreferences.avatarColor;
    }
    
    function saveProfile() {
      const name = document.getElementById('profile-name').value;
      const initials = document.getElementById('profile-initials').value.toUpperCase();
      
      userPreferences.name = name;
      userPreferences.initials = initials;
      
      localStorage.setItem('userPreferences', JSON.stringify(userPreferences));
      updateUserAvatar();
      closeProfileModal();
    }
    
    function saveUserInfo() {
      const name = document.getElementById('user-name').value;
      const email = document.getElementById('user-email').value;
      
      userPreferences.name = name;
      userPreferences.email = email;
      
      localStorage.setItem('userPreferences', JSON.stringify(userPreferences));
      
      // Update profile modal if it's open
      document.getElementById('profile-name').value = name;
      
      // Show success message
      alert('User information saved successfully!');
    }
    
    function openSettingsModal() {
      settingsModal.style.display = 'flex';
    }
    
    function closeSettingsModal() {
      settingsModal.style.display = 'none';
    }
    
    function openProfileModal() {
      profileModal.style.display = 'flex';
    }
    
    function closeProfileModal() {
      profileModal.style.display = 'none';
    }
    
    function openTaskModal(status = 'todo', taskId = null) {
      const taskStatus = document.getElementById('task-status');
      taskStatus.value = status;
      
      if (taskId) {
        // Edit mode
        const task = tasks.find(t => t.id === taskId);
        if (!task) return;
        
        document.getElementById('task-id').value = task.id;
        document.getElementById('task-title').value = task.title;
        document.getElementById('task-description').value = task.description || '';
        document.getElementById('task-category').value = task.category;
        document.getElementById('task-priority').value = task.priority;
        
        if (task.dueDate) {
          // Format date for datetime-local input
          const dueDate = new Date(task.dueDate.getTime() - task.dueDate.getTimezoneOffset() * 60000);
          document.getElementById('task-due-date').value = dueDate.toISOString().slice(0, 16);
        } else {
          document.getElementById('task-due-date').value = '';
        }
        
        modalTitle.textContent = 'Edit Task';
        saveTaskBtn.textContent = 'Update Task';
      } else {
        // Add mode
        taskForm.reset();
        document.getElementById('task-id').value = '';
        modalTitle.textContent = 'Add New Task';
        saveTaskBtn.textContent = 'Add Task';
      }
      
      taskModal.style.display = 'flex';
    }
    
    function closeTaskModal() {
      taskModal.style.display = 'none';
      taskForm.reset();
    }
    
    function saveTask() {
      const taskId = document.getElementById('task-id').value;
      const title = document.getElementById('task-title').value;
      const description = document.getElementById('task-description').value;
      const category = document.getElementById('task-category').value;
      const priority = document.getElementById('task-priority').value;
      const dueDateValue = document.getElementById('task-due-date').value;
      const status = document.getElementById('task-status').value;
      
      // Validate required fields
      if (!title || !category) return;
      
      const dueDate = dueDateValue ? new Date(dueDateValue) : null;
      
      if (taskId) {
        // Update existing task
        const taskIndex = tasks.findIndex(t => t.id === taskId);
        if (taskIndex === -1) return;
        
        const updatedTask = {
          ...tasks[taskIndex],
          title,
          description: description || undefined,
          category,
          priority,
          dueDate,
          status
        };
        
        tasks[taskIndex] = updatedTask;
      } else {
        // Add new task
        const newTask = {
          id: Date.now().toString(),
          title,
          description: description || undefined,
          category,
          priority,
          dueDate,
          completed: status === 'completed',
          createdAt: new Date(),
          status
        };
        
        tasks.push(newTask);
      }
      
      // Save to localStorage and update UI
      localStorage.setItem('tasks', JSON.stringify(tasks));
      renderTasks();
      updateCounters();
      refreshSidebar();
      closeTaskModal();
    }
    
    function deleteTask(taskId) {
      if (confirm('Are you sure you want to delete this task?')) {
        tasks = tasks.filter(task => task.id !== taskId);
        localStorage.setItem('tasks', JSON.stringify(tasks));
        renderTasks();
        updateCounters();
        refreshSidebar();
      }
    }
    
    function toggleTaskComplete(taskId) {
      const taskIndex = tasks.findIndex(t => t.id === taskId);
      if (taskIndex === -1) return;
      
      tasks[taskIndex].completed = !tasks[taskIndex].completed;
      
      // Update status based on completed flag
      if (tasks[taskIndex].completed) {
        tasks[taskIndex].status = 'completed';
      } else if (tasks[taskIndex].status === 'completed') {
        tasks[taskIndex].status = 'todo';
      }
      
      localStorage.setItem('tasks', JSON.stringify(tasks));
      renderTasks();
      updateCounters();
      refreshSidebar();
    }
    
    function renderTasks() {
      // Clear all containers
      todoTasksContainer.innerHTML = '';
      progressTasksContainer.innerHTML = '';
      completedTasksContainer.innerHTML = '';
      
      // Group tasks by status
      const todoTasks = tasks.filter(task => task.status === 'todo' || (!task.status && !task.completed));
      const progressTasks = tasks.filter(task => task.status === 'in-progress');
      const completedTasks = tasks.filter(task => task.status === 'completed' || (!task.status && task.completed));
      
      // Render tasks in each column
      todoTasks.forEach(task => renderTaskCard(task, todoTasksContainer));
      progressTasks.forEach(task => renderTaskCard(task, progressTasksContainer));
      completedTasks.forEach(task => renderTaskCard(task, completedTasksContainer));
      
      // Add the "Add Task" button at the end of each column
      todoTasksContainer.appendChild(addTodoBtn);
      progressTasksContainer.appendChild(addProgressBtn);
      completedTasksContainer.appendChild(addCompletedBtn);
    }
    
    function renderFilteredTasks(filteredTasks) {
      // Clear all containers
      todoTasksContainer.innerHTML = '';
      progressTasksContainer.innerHTML = '';
      completedTasksContainer.innerHTML = '';
      
      // Group filtered tasks by status
      const todoTasks = filteredTasks.filter(task => task.status === 'todo' || (!task.status && !task.completed));
      const progressTasks = filteredTasks.filter(task => task.status === 'in-progress');
      const completedTasks = filteredTasks.filter(task => task.status === 'completed' || (!task.status && task.completed));
      
      // Render tasks in each column
      todoTasks.forEach(task => renderTaskCard(task, todoTasksContainer));
      progressTasks.forEach(task => renderTaskCard(task, progressTasksContainer));
      completedTasks.forEach(task => renderTaskCard(task, completedTasksContainer));
      
      // Add the "Add Task" button at the end of each column
      todoTasksContainer.appendChild(addTodoBtn);
      progressTasksContainer.appendChild(addProgressBtn);
      completedTasksContainer.appendChild(addCompletedBtn);
      
      // Update the board title to indicate filtering
      document.querySelector('.board-title').textContent = 'Filtered Tasks';
    }
    
    function renderTaskCard(task, container) {
      const taskCard = document.createElement('div');
      taskCard.className = `task-card priority-${task.priority}`;
      taskCard.dataset.id = task.id;
      
      const formattedDueDate = task.dueDate ? formatDate(task.dueDate) : '';
      const isToday = task.dueDate ? isTaskToday(task.dueDate) : false;
      const isThisWeek = task.dueDate ? isTaskThisWeek(task.dueDate) : false;
      
      taskCard.innerHTML = `
        <div class="task-header">
          <div class="task-title">
            ${task.title}
            ${isToday ? '<span class="today-badge">Today</span>' : ''}
            ${!isToday && isThisWeek ? '<span class="week-badge">This Week</span>' : ''}
          </div>
          <div class="task-menu">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px; cursor: pointer;" class="task-edit-btn">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="cursor: pointer;" class="task-delete-btn">
              <path d="M3 6h18"></path>
              <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
              <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
              <line x1="10" y1="11" x2="10" y2="17"></line>
              <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
          </div>
        </div>
        
        ${task.description ? `<div class="task-description">${task.description}</div>` : ''}
        
        <div class="task-labels">
          <div class="task-label">${task.category}</div>
        </div>
        
        <div class="task-meta">
          ${task.dueDate ? `
            <div class="task-due-date">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
              ${formattedDueDate}
            </div>
          ` : ''}
        </div>
      `;
      
      // Add event listeners
      taskCard.addEventListener('click', (e) => {
        // Only open the edit modal if clicking on the card but not on buttons
        if (!e.target.closest('.task-edit-btn') && !e.target.closest('.task-delete-btn')) {
          openTaskModal(task.status, task.id);
        }
      });
      
      // Add event listener to edit icon
      const editIcon = taskCard.querySelector('.task-edit-btn');
      editIcon.addEventListener('click', (e) => {
        e.stopPropagation();
        openTaskModal(task.status, task.id);
      });
      
      // Add event listener to delete icon
      const deleteIcon = taskCard.querySelector('.task-delete-btn');
      deleteIcon.addEventListener('click', (e) => {
        e.stopPropagation();
        deleteTask(task.id);
      });
      
      // Insert before the "add task" button
      container.appendChild(taskCard);
    }
    
    function updateCounters() {
      // Update column counts
      document.getElementById('todo-count').textContent = tasks.filter(task => task.status === 'todo' || (!task.status && !task.completed)).length;
      document.getElementById('progress-count').textContent = tasks.filter(task => task.status === 'in-progress').length;
      document.getElementById('completed-column-count').textContent = tasks.filter(task => task.status === 'completed' || (!task.status && task.completed)).length;
      
      // Update main board count
      document.getElementById('main-board-count').textContent = tasks.length;
      
      // Update completed count
      const completedCount = tasks.filter(task => task.completed || task.status === 'completed').length;
      document.getElementById('completed-count').textContent = completedCount;
      
      // Update priority counts
      document.getElementById('high-priority-count').textContent = tasks.filter(task => task.priority === 'high').length;
      document.getElementById('medium-priority-count').textContent = tasks.filter(task => task.priority === 'medium').length;
      document.getElementById('low-priority-count').textContent = tasks.filter(task => task.priority === 'low').length;
      
      // Update progress bar
      const progressPercent = tasks.length ? (completedCount / tasks.length) * 100 : 0;
      document.getElementById('progress-fill').style.width = `${progressPercent}%`;
      document.getElementById('progress-text').textContent = `${completedCount}/${tasks.length} Tasks`;
      
      // Update today and this week counts
      const todayTasks = tasks.filter(task => task.dueDate && isTaskToday(task.dueDate));
      const thisWeekTasks = tasks.filter(task => task.dueDate && isTaskThisWeek(task.dueDate));
      document.getElementById('today-count').textContent = todayTasks.length;
      document.getElementById('week-count').textContent = thisWeekTasks.length;
    }
    
    function refreshSidebar() {
      // Update categories list
      const categoriesList = document.getElementById('categories-list');
      categoriesList.innerHTML = '';
      
      // Get unique categories
      const categories = [...new Set(tasks.map(task => task.category))];
      
      categories.forEach(category => {
        const categoryCount = tasks.filter(task => task.category === category).length;
        
        const li = document.createElement('li');
        li.className = 'sidebar-item';
        li.innerHTML = `
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>
          <span>${category}</span>
          <span class="item-count">${categoryCount}</span>
        `;
        
        li.addEventListener('click', () => {
          filterTasks('category', category);
        });
        
        categoriesList.appendChild(li);
      });
    }
    
    function filterTasks(type, value = null) {
      let filteredTasks;
      
      if (type === 'completed') {
        filteredTasks = tasks.filter(task => task.completed || task.status === 'completed');
      } else if (type === 'priority') {
        filteredTasks = tasks.filter(task => task.priority === value);
      } else if (type === 'category') {
        filteredTasks = tasks.filter(task => task.category === value);
      } else {
        // Default - no filter
        renderTasks();
        document.querySelector('.board-title').textContent = 'Main Board';
        return;
      }
      
      renderFilteredTasks(filteredTasks);
    }
    
    function filterTasksByDate(period) {
      let filteredTasks;
      
      if (period === 'today') {
        filteredTasks = tasks.filter(task => task.dueDate && isTaskToday(task.dueDate));
        document.querySelector('.board-title').textContent = 'Today\'s Tasks';
      } else if (period === 'week') {
        filteredTasks = tasks.filter(task => task.dueDate && isTaskThisWeek(task.dueDate));
        document.querySelector('.board-title').textContent = 'This Week\'s Tasks';
      } else {
        renderTasks();
        document.querySelector('.board-title').textContent = 'Main Board';
        return;
      }
      
      renderFilteredTasks(filteredTasks);
    }
    
    function isTaskToday(date) {
      const today = new Date();
      return date.getDate() === today.getDate() &&
             date.getMonth() === today.getMonth() &&
             date.getFullYear() === today.getFullYear();
    }
    
    function isTaskThisWeek(date) {
      const today = new Date();
      const weekStart = new Date(today);
      weekStart.setDate(today.getDate() - today.getDay());
      weekStart.setHours(0, 0, 0, 0);
      
      const weekEnd = new Date(weekStart);
      weekEnd.setDate(weekStart.getDate() + 6);
      weekEnd.setHours(23, 59, 59, 999);
      
      return date >= weekStart && date <= weekEnd;
    }
    
    function formatDate(date) {
      const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
      return `${months[date.getMonth()]} ${date.getDate()}`;
    }
  </script>
</body>
</html>
